import{b as re,r as v,j as a,c as se,a as ne}from"./client-CJnX4qAx.js";import{T as oe,r as ae,s as ie,j as le,k as ce,q as G,B as D,t as ue,v as he,w as fe,x as pe,y as de}from"./index-BUtqJqcX.js";import{c as me,S as ye}from"./Sidebar-BAhWtxfF.js";/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Ee=me("external-link",Ae),ve=()=>{const e=re(),t=v.useRef(null),r=v.useRef(null),s=o=>{o.onmessage=n=>{const h=JSON.parse(n.data);if(JSON.stringify(h)===JSON.stringify(r.current)){console.log("Data is identical to the last message, skipping...");return}r.current=h,console.log("WebSocket message:",h),h.type==="UPDATE"&&h.key&&h.value&&e.setQueryData(h.key,h.value)},o.onerror=n=>{console.error("WebSocket Error:",n)},o.onclose=()=>{console.log("WebSocket connection closed"),t.current=null}};t.current!==null&&V(t.current,s),v.useEffect(()=>{V(t,s)},[])},V=(e,t)=>{if(typeof window>"u"||e.current)return;const r=new WebSocket("ws://localhost:3000/_ws");return e.current=r,r.onopen=()=>{console.log("WebSocket connection established"),t(r)},()=>{e.current&&(e.current.close(),e.current=null)}},C=e=>e.split(".").map(t=>parseInt(t,10)||0),j=(e,t)=>{if(!S(e)||!S(t))throw new Error("Ungültige Versionen können nicht verglichen werden");const r=C(e),s=C(t);for(let o=0;o<Math.max(r.length,s.length);o++){const n=r[o]||0,h=s[o]||0;if(n>h)return 1;if(n<h)return-1}return 0},S=e=>/^\d+(\.\d+)*$/.test(e);var m=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof global<"u"&&global||{},A={searchParams:"URLSearchParams"in m,iterable:"Symbol"in m&&"iterator"in Symbol,blob:"FileReader"in m&&"Blob"in m&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in m,arrayBuffer:"ArrayBuffer"in m};function be(e){return e&&DataView.prototype.isPrototypeOf(e)}if(A.arrayBuffer)var ge=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],xe=ArrayBuffer.isView||function(e){return e&&ge.indexOf(Object.prototype.toString.call(e))>-1};function P(e){if(typeof e!="string"&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||e==="")throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function k(e){return typeof e!="string"&&(e=String(e)),e}function O(e){var t={next:function(){var r=e.shift();return{done:r===void 0,value:r}}};return A.iterable&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach(function(t,r){this.append(r,t)},this):Array.isArray(e)?e.forEach(function(t){if(t.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+t.length);this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}d.prototype.append=function(e,t){e=P(e),t=k(t);var r=this.map[e];this.map[e]=r?r+", "+t:t};d.prototype.delete=function(e){delete this.map[P(e)]};d.prototype.get=function(e){return e=P(e),this.has(e)?this.map[e]:null};d.prototype.has=function(e){return this.map.hasOwnProperty(P(e))};d.prototype.set=function(e,t){this.map[P(e)]=k(t)};d.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)};d.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),O(e)};d.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),O(e)};d.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),O(e)};A.iterable&&(d.prototype[Symbol.iterator]=d.prototype.entries);function U(e){if(!e._noBody){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}}function H(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function Se(e){var t=new FileReader,r=H(t);return t.readAsArrayBuffer(e),r}function Te(e){var t=new FileReader,r=H(t),s=/charset=([A-Za-z0-9_-]+)/.exec(e.type),o=s?s[1]:"utf-8";return t.readAsText(e,o),r}function we(e){for(var t=new Uint8Array(e),r=new Array(t.length),s=0;s<t.length;s++)r[s]=String.fromCharCode(t[s]);return r.join("")}function F(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function M(){return this.bodyUsed=!1,this._initBody=function(e){this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?typeof e=="string"?this._bodyText=e:A.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:A.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:A.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():A.arrayBuffer&&A.blob&&be(e)?(this._bodyArrayBuffer=F(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):A.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||xe(e))?this._bodyArrayBuffer=F(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof e=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):A.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},A.blob&&(this.blob=function(){var e=U(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=U(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(A.blob)return this.blob().then(Se);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var e=U(this);if(e)return e;if(this._bodyBlob)return Te(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(we(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},A.formData&&(this.formData=function(){return this.text().then(Le)}),this.json=function(){return this.text().then(JSON.parse)},this}var Ie=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function Ne(e){var t=e.toUpperCase();return Ie.indexOf(t)>-1?t:e}function L(e,t){if(!(this instanceof L))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t=t||{};var r=t.body;if(e instanceof L){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,!r&&e._bodyInit!=null&&(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",(t.headers||!this.headers)&&(this.headers=new d(t.headers)),this.method=Ne(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in m){var n=new AbortController;return n.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&r)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(r),(this.method==="GET"||this.method==="HEAD")&&(t.cache==="no-store"||t.cache==="no-cache")){var s=/([?&])_=[^&]*/;if(s.test(this.url))this.url=this.url.replace(s,"$1_="+new Date().getTime());else{var o=/\?/;this.url+=(o.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}L.prototype.clone=function(){return new L(this,{body:this._bodyInit})};function Le(e){var t=new FormData;return e.trim().split("&").forEach(function(r){if(r){var s=r.split("="),o=s.shift().replace(/\+/g," "),n=s.join("=").replace(/\+/g," ");t.append(decodeURIComponent(o),decodeURIComponent(n))}}),t}function Be(e){var t=new d,r=e.replace(/\r?\n[\t ]+/g," ");return r.split("\r").map(function(s){return s.indexOf(`
`)===0?s.substr(1,s.length):s}).forEach(function(s){var o=s.split(":"),n=o.shift().trim();if(n){var h=o.join(":").trim();try{t.append(n,h)}catch(T){console.warn("Response "+T.message)}}}),t}M.call(L.prototype);function x(e,t){if(!(this instanceof x))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=t.status===void 0?200:t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText===void 0?"":""+t.statusText,this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}M.call(x.prototype);x.prototype.clone=function(){return new x(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})};x.error=function(){var e=new x(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var Re=[301,302,303,307,308];x.redirect=function(e,t){if(Re.indexOf(t)===-1)throw new RangeError("Invalid status code");return new x(null,{status:t,headers:{location:e}})};var N=m.DOMException;try{new N}catch{N=function(t,r){this.message=t,this.name=r;var s=Error(t);this.stack=s.stack},N.prototype=Object.create(Error.prototype),N.prototype.constructor=N}function q(e,t){return new Promise(function(r,s){var o=new L(e,t);if(o.signal&&o.signal.aborted)return s(new N("Aborted","AbortError"));var n=new XMLHttpRequest;function h(){n.abort()}n.onload=function(){var c={statusText:n.statusText,headers:Be(n.getAllResponseHeaders()||"")};o.url.indexOf("file://")===0&&(n.status<200||n.status>599)?c.status=200:c.status=n.status,c.url="responseURL"in n?n.responseURL:c.headers.get("X-Request-URL");var E="response"in n?n.response:n.responseText;setTimeout(function(){r(new x(E,c))},0)},n.onerror=function(){setTimeout(function(){s(new TypeError("Network request failed"))},0)},n.ontimeout=function(){setTimeout(function(){s(new TypeError("Network request timed out"))},0)},n.onabort=function(){setTimeout(function(){s(new N("Aborted","AbortError"))},0)};function T(c){try{return c===""&&m.location.href?m.location.href:c}catch{return c}}if(n.open(o.method,T(o.url),!0),o.credentials==="include"?n.withCredentials=!0:o.credentials==="omit"&&(n.withCredentials=!1),"responseType"in n&&(A.blob?n.responseType="blob":A.arrayBuffer&&(n.responseType="arraybuffer")),t&&typeof t.headers=="object"&&!(t.headers instanceof d||m.Headers&&t.headers instanceof m.Headers)){var w=[];Object.getOwnPropertyNames(t.headers).forEach(function(c){w.push(P(c)),n.setRequestHeader(c,k(t.headers[c]))}),o.headers.forEach(function(c,E){w.indexOf(E)===-1&&n.setRequestHeader(E,c)})}else o.headers.forEach(function(c,E){n.setRequestHeader(E,c)});o.signal&&(o.signal.addEventListener("abort",h),n.onreadystatechange=function(){n.readyState===4&&o.signal.removeEventListener("abort",h)}),n.send(typeof o._bodyInit>"u"?null:o._bodyInit)})}q.polyfill=!0;m.fetch||(m.fetch=q,m.Headers=d,m.Request=L,m.Response=x);var Pe={"ii/demo":[{env:"DEV",versions:{template:"0.9.0",components:[{name:"ldproxy",version:"4.3.1",main:!0}],configurations:[{name:"demo-gitea",version:"main",main:!0}]},state:{url:"https://dev.ii.geoapihub.io/demo",apis:5,health:"UNAVAILABLE",tests:"NONE"},apis:[{name:"cshapes",kinds:["FEATURES"],health:"UNAVAILABLE",tests:"NONE",testRuns:[]},{name:"daraa",kinds:["FEATURES","TILES"],health:"UNAVAILABLE",tests:"NONE",testRuns:[]},{name:"strassen",kinds:["FEATURES","TILES"],health:"UNAVAILABLE",tests:"NONE",testRuns:[]},{name:"vineyards",kinds:["FEATURES","TILES"],health:"UNAVAILABLE",tests:"NONE",testRuns:[]},{name:"zoomstack",kinds:["FEATURES","TILES"],health:"UNAVAILABLE",tests:"NONE",testRuns:[]}]},{env:"STAGE",versions:{template:"0.9.0",components:[{name:"ldproxy",version:"4.3.1",main:!0}],configurations:[{name:"demo-gitea",version:"1.0.0",main:!0}]},state:{url:"https://stg.ii.geoapihub.io/demo",apis:5,health:"LIMITED",tests:"MIXED"},apis:[{name:"cshapes",kinds:["FEATURES"],health:"AVAILABLE",tests:"PASSING",testRuns:[{name:"compare",result:"PASSING",report:"https://example.com/report"},{name:"compliance",result:"PASSING",report:"https://example.com/report"}]},{name:"daraa",kinds:["FEATURES","TILES"],health:"AVAILABLE",tests:"PASSING",testRuns:[{name:"compare",result:"PASSING",report:"https://example.com/report"},{name:"compliance",result:"PASSING",report:"https://example.com/report"}]},{name:"strassen",kinds:["FEATURES","TILES"],health:"AVAILABLE",tests:"MIXED",testRuns:[{name:"compare",result:"PASSING",report:"https://example.com/report"},{name:"compliance",result:"FAILING",report:"https://example.com/report"}]},{name:"vineyards",kinds:["FEATURES","TILES"],health:"AVAILABLE",tests:"PASSING",testRuns:[{name:"compare",result:"PASSING",report:"https://example.com/report"},{name:"compliance",result:"PASSING",report:"https://example.com/report"}]},{name:"zoomstack",kinds:["FEATURES","TILES"],health:"UNAVAILABLE",tests:"NONE",testRuns:[]}]},{env:"PROD",versions:{template:"0.9.0",components:[{name:"ldproxy",version:"4.3.1",main:!0}],configurations:[{name:"demo-gitea",version:"1.0.1",main:!0}]},state:{url:"https://ii.geoapihub.io/demo",apis:5,health:"AVAILABLE",tests:"PASSING"},apis:[{name:"cshapes",kinds:["FEATURES"],health:"AVAILABLE",tests:"PASSING",testRuns:[{name:"compare",result:"PASSING",report:"https://example.com/report"},{name:"compliance",result:"PASSING",report:"https://example.com/report"}]},{name:"daraa",kinds:["FEATURES","TILES"],health:"AVAILABLE",tests:"PASSING",testRuns:[{name:"compare",result:"PASSING",report:"https://example.com/report"},{name:"compliance",result:"PASSING",report:"https://example.com/report"}]},{name:"strassen",kinds:["FEATURES","TILES"],health:"AVAILABLE",tests:"PASSING",testRuns:[{name:"compare",result:"PASSING",report:"https://example.com/report"},{name:"compliance",result:"PASSING",report:"https://example.com/report"}]},{name:"vineyards",kinds:["FEATURES","TILES"],health:"AVAILABLE",tests:"PASSING",testRuns:[{name:"compare",result:"PASSING",report:"https://example.com/report"},{name:"compliance",result:"PASSING",report:"https://example.com/report"}]},{name:"zoomstack",kinds:["FEATURES","TILES"],health:"AVAILABLE",tests:"PASSING",testRuns:[{name:"compare",result:"PASSING",report:"https://example.com/report"},{name:"compliance",result:"PASSING",report:"https://example.com/report"}]}]}],"ii/aaa-inspire":[{env:"PROD",versions:{template:"0.8.0",components:[{name:"ldproxy",version:"4.2.4",main:!0}],configurations:[{name:"aaa-inspire-gitea",version:"main"}]},state:{url:"https://ii.geoapihub.io/aaa-inspire",apis:4,health:"LIMITED",tests:"NONE"},apis:[{name:"au",kinds:["FEATURES"],health:"AVAILABLE",tests:"NONE",testRuns:[]},{name:"cp",kinds:["FEATURES"],health:"UNAVAILABLE",tests:"NONE",testRuns:[]},{name:"hy-p",kinds:["FEATURES"],health:"AVAILABLE",tests:"NONE",testRuns:[]},{name:"lc",kinds:["FEATURES"],health:"LIMITED",tests:"NONE",testRuns:[]}]}]},je=e=>({env:e.env,versions:e.versions,state:e.state}),$=(e,t)=>Pe[`${e}/${t}`]?.map(je)||[];$("ii","demo"),$("ii","aaa-inspire");const De={name:{header:"APIs",cell:({row:e})=>{const t=e.original.health,r=t==="AVAILABLE"?"text-green-600 font-bold":t==="LIMITED"?"text-yellow-600 font-bold":"text-red-600 font-bold";return a.jsx("span",{className:r,children:e.original.name})}},kinds:{header:"Kinds",cell:({row:e})=>{const t=e.original.health,r=t==="AVAILABLE"?"text-green-600":t==="LIMITED"?"text-yellow-600":"text-red-600";return a.jsx("span",{className:r,children:Array.isArray(e.original.kinds)?e.original.kinds.join(", "):e.original.kinds})}},health:{header:"Health",cell:({row:e})=>{const t=e.original.health,r=t==="AVAILABLE"?"text-green-600":t==="LIMITED"?"text-yellow-600":"text-red-600";return a.jsx("span",{className:r,children:t})}},tests:{header:"Tests",cell:({row:e})=>{const t=e.original.health,r=t==="AVAILABLE"?"text-green-600":t==="LIMITED"?"text-yellow-600":"text-red-600";return a.jsxs(oe,{children:[a.jsx(ae,{children:a.jsx("span",{className:r,children:e.original.tests})}),a.jsx(ie,{children:a.jsx("div",{children:Array.isArray(e.original.testRuns)&&e.original.testRuns.length>0?e.original.testRuns.map((s,o)=>a.jsx("div",{className:"flex items-center space-x-1",children:a.jsxs("a",{href:s.report,target:"_blank",rel:"noopener noreferrer",className:"text-blue-550 underline flex items-center",children:[`${s.name.charAt(0).toUpperCase()+s.name.slice(1)}: ${s.result}`,a.jsx(Ee,{className:"w-3 h-3 ml-1 relative top-[-3px]"})]})},o)):"No test runs available"})})]})}}},Ue=({title:e,description:t,rows:r,onClose:s,deployment:o,envName:n,envDetails:h})=>{const[T,w]=v.useState(!0),c=()=>{w(!1),s&&s()},E=async()=>{try{const g={...h};if(r.some(b=>b.name===o.template)){const b=r.find(I=>I.name===o.template)?.versions.split(" --> ")[1];b&&(g.versions.template=b)}r.forEach(b=>{const I=g.versions.configurations.find(y=>y.name===b.name);if(I){const y=b.versions.split(" --> ")[1];y&&(I.version=y)}});const B=await fetch(`/api/deployment/${o.owner}/${o.name}/env/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)});if(!B.ok){const b=await B.json();console.error("Update failed:",b.error);return}console.log("Deployment updated successfully."),s()}catch(g){console.error("An error occurred while updating the deployment:",g)}};return a.jsx(a.Fragment,{children:a.jsx(le,{open:T,onOpenChange:g=>{w(g),!g&&s&&s()},children:a.jsxs(ce,{children:[a.jsx("div",{className:"mt-6",children:a.jsx(G,{title:e,description:t,rows:r})}),a.jsxs("div",{className:"mt-4 flex justify-end",children:[a.jsx(D,{variant:"outline",onClick:c,style:{marginRight:"8px"},children:"Close"}),a.jsx(D,{variant:"default",onClick:E,children:"Update"})]})]})})})},ke=async(e,t)=>{const r=await fetch(`/api/configuration/${e}/${t}/versions`);if(!r.ok)throw new Error(`API antwortete mit Status: ${r.status}`);return r.json()},Oe=async(e,t,r)=>{const s=await fetch(`/api/deployment/${e}/${t}/env/${r}`);if(!s.ok)throw new Error(`API antwortete mit Status: ${s.status}`);return s.json()},Fe=function(){const[t,r]=v.useState(""),[s,o]=v.useState(""),[n,h]=v.useState(),[T,w]=v.useState([]),{owner:c,name:E}=se({from:"/deployment/$owner/$name"}),[g,B]=v.useState(!1),[b,I]=v.useState([]),[y,z]=v.useState([]),W=i=>{o(i)},J=i=>{const l=i.versions.configurations.filter(u=>S(u.version)?(n?.[u.name]?.filter(S)||[]).some(R=>j(R,u.version)===1):!1).map(u=>({name:u.name,versions:`${u.version}   -->   ${n?.[u.name]?.filter(S).sort((p,R)=>j(R,p))[0]||"N/A"}`}));I(l),r(i.env),B(!0)},X=i=>{const l=T.filter(S).sort((p,R)=>j(R,p))[0]||"N/A",u=[{name:f.template,versions:`${i.versions.template} --> ${l}`}];I(u),r(i.env),B(!0)};ve();const{data:f={},isLoading:K,error:_}=ne({queryKey:["deployment",c,E],queryFn:()=>Q(c,E),staleTime:5e3}),Q=async(i,l)=>{const u=await fetch(`/api/deployment/${i}/${l}`);if(!u.ok)throw new Error(`API antwortete mit Status: ${u.status}`);const p=await u.json();return Z(i,p.configurations),Y(p.template),p};v.useEffect(()=>{(async()=>{if(!f?.envs?.length)return;const l=await Promise.all(f.envs.map(u=>Oe(c,E,u.env).catch(p=>(console.error(`Fehler beim Laden von ${u.env}:`,p),null))));z(l.filter(Boolean))})()},[f]),v.useEffect(()=>{y?.length&&!s&&o(y[0].env)},[f,s,y]);const Z=async(i,l)=>{const u={};for(const p of l)u[p]=await ke(i,p);h(u)},Y=async i=>{const l=await fetch(`/api/template/${i}/versions`);if(!l.ok)throw new Error(`API antwortete mit Status: ${l.status}`);w(await l.json())},ee=[{label:"Name",value:f.name},{label:"Owner",value:f.owner},{label:"Size",value:f.size},{label:"Flow",value:f.flow},{label:"Template",value:f.template},{label:"Configurations",value:f.configurations?.length?f.configurations.map(i=>i).join(", "):"No configurations available"}];return K?a.jsx("div",{children:"Loading Deployment Details..."}):_?a.jsxs("div",{className:"text-red-500",children:["Error: ",_.message]}):f?a.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 overflow-y-auto",children:a.jsxs(ye,{breadcrumbTitle:a.jsxs("span",{children:["Dashboard   >   ",f.name]}),children:[g&&a.jsx("div",{children:a.jsx(Ue,{title:"Update Information",description:"Details about possible updates.",rows:b,onClose:()=>B(!1),deployment:f,envName:t,envDetails:y.find(i=>i.env===t)})}),a.jsx("div",{style:{marginBottom:"100px",marginRight:"50px"},children:a.jsxs("div",{children:[a.jsx("div",{className:"mt-8 mb-8",children:f&&a.jsx(G,{title:f.label,description:f.description,items:ee})}),a.jsxs(ue,{value:s,onValueChange:W,className:"h-full space-y-6",children:[a.jsx("div",{className:"space-between flex items-center",children:a.jsx(he,{children:y&&y.length>0&&y.map((i,l)=>a.jsx(fe,{value:i.env,children:a.jsx("span",{children:i.env})},l))})}),y?.map(i=>a.jsx(pe,{value:i.env,children:a.jsx(de,{title:`${i.env}`,description:"",state:i.state?.health,apis:`${i.state?.apis}`,size:`${f.size}`,tests:i.state?.tests||"NONE",version:i.versions?.components?i.versions.components.map(l=>`${l.name} ${l.version}`).join(", "):"Keine Version verfügbar",href:`${i.state?.url}`,columns:De,data:Array.isArray(y.find(l=>l.env===s)?.apis)?y.find(l=>l.env===s)?.apis:[],actions:(()=>{const l=i.versions.configurations.some(p=>S(p.version)?(n?.[p.name]?.filter(S)||[]).some(te=>j(te,p.version)===1):!1),u=T.filter(S).some(p=>j(p,i.versions.template)===1);return(l||u)&&a.jsxs("div",{className:"flex gap-2",children:[l&&a.jsx(D,{variant:"default",onClick:()=>J(i),children:"Upgrade Configuration"}),u&&a.jsx(D,{variant:"default",onClick:()=>X(i),children:"Upgrade Template"})]})})()})},i.env))]})]})})]})}):a.jsx("div",{children:"No deployments found."})};export{Fe as component};
